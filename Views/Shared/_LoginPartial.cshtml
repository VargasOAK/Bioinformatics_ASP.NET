@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    <div class="app-navbar-item" id="kt_header_user_menu_toggle">
        <!--begin::Menu wrapper-->
        <div class="d-flex align-items-center border border-dashed border-gray-300 rounded p-2" data-kt-menu-trigger="{default: 'click', lg: 'hover'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
            <!--begin::User-->
            <div class="cursor-pointer symbol me-3 symbol-35px symbol-lg-45px">
                <img class="" src="~/assets/media/avatars/300-1.jpg" alt="user" />
            </div>
            <!--end::User-->
            <!--begin:Info-->
            <div class="me-4">
                <span class="text-gray-900 text-hover-primary fs-6 fw-bold"> @User.Identity?.Name</span>
                <span class="text-gray-500 text-hover-primary fs-7 fw-bold d-block"> Profile - Scientist</span>
            </div>
            <!--end:Info-->
            <i class="ki-outline ki-down fs-2 text-gray-500 pt-1"></i>
        </div>
        <!--begin::User account menu-->
        <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px" data-kt-menu="true">
            <!--begin::Menu item-->
            <div class="menu-item px-3">
                <div class="menu-content d-flex align-items-center px-3">
                    <!--begin::Username-->
                    <div class="d-flex flex-column">
                        <div class="fw-bold d-flex align-items-center fs-5">
                            @User.Identity?.Name
                            <span class="badge badge-light-success fw-bold fs-8 px-2 py-1 ms-2">Active</span>
                        </div>
                    </div>
                    <!--end::Username-->
                </div>
            </div>
            <!--end::Menu item-->
            <!--begin::Menu separator-->
            <div class="separator my-2"></div>
            <!--end::Menu separator-->
            <!--begin::Menu item-->
            <div class="menu-item px-5">
                <a class="menu-link px-5" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">My Profile</a>
            </div>
            <!--end::Menu item-->
            <!--begin::Menu separator-->
            <div class="separator my-2"></div>
            <!--end::Menu separator-->
            <!--begin::Menu item-->
            <div class="menu-item px-5">
                <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                    <button type="submit" class="menu-link px-5 bg-transparent border-0 w-100 text-start">Sign Out</button>
                </form>
            </div>
            <!--end::Menu item-->
        </div>
        <!--end::User account menu-->
    </div>
}
else
{
    <div class="app-navbar-item">
        <!--begin::Authentication-->
        <div class="d-flex gap-3">
            <a href="@Url.Page("/Account/Register", new { area = "Identity" })" class="btn btn-light-primary">Register</a>
            <a href="@Url.Page("/Account/Login", new { area = "Identity" })" class="btn btn-primary">Sign In</a>
        </div>
        <!--end::Authentication-->
    </div>
}
